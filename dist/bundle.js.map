{"version":3,"sources":["webpack:///webpack/bootstrap aff8ec1d434ae57c7466","webpack:///./src/template.js","webpack:///./assets/index.scss","webpack:///./~/normalize.css/normalize.css","webpack:///./src/controller.js","webpack:///./src/view.js","webpack:///./src/app.js","webpack:///./src/dataService.js","webpack:///./src/helpers.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA,mDAA2C,cAAc;;AAEzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;AChEA;AACA;AACA;AACA;AACA;AACA,WAAW,sBAAsB;;AAEjC;AACA;AACA;AACA;AACA,cAAc,YAAY;AAC1B,cAAc,YAAY;AAC1B;AACA;AACA;AACA,iBAAiB,YAAY;AAC7B,iBAAiB,MAAM;AACvB;AACA,eAAe,MAAM;AACrB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,UAAU;AACV;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AAAA;AAAA;;;;;;;AC/CA,yC;;;;;;ACAA,yC;;;;;;;;;ACAA;AACmB;;AAEnB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,OAAO;AACP;AACA;AAAA;AAAA;;;;;;;;ACjDA;AAAA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,kHAAgE,MAAM;AACtE;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;;;;;;;;;;;;;AC/CA;AAAA;AAAA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,MAAM;AAC1B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,8BAA8B;AAC7C;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,OAAO;AACP;AACA;AAAA;AAAA;;;;;;;;;;;;;ACnCA;AAAA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 5);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap aff8ec1d434ae57c7466","export default class Template {\n  /**\n   * HTML template for a single thumbnail\n   */\n  static thumb(item) {\n    const { thumb, title, views } = item;\n\n    return `\n      <li class=\"thumb\">\n        <img\n          srcset=\"\n            ${thumb.small} 75w,\n            ${thumb.large} 150w\"\n          sizes=\"\n            (max-width: 32.1rem) 75px,\n            150px\"\n          src=\"${thumb.large}\"\n          alt=\"${title}\"\n        />\n        <div>${views}</div>\n     </li>\n    `;\n  }\n\n  /**\n   * HTML template for the thumbnails\n   */\n  static thumbnails(items) {\n    const thumbs = items.reduce((tmpl, item) => tmpl + Template.thumb(item), '');\n\n    return `\n      <ul class=\"thumbs-list\">\n        ${thumbs}\n      </ul>\n    `;\n  }\n\n  /**\n   * HTML template for messages\n   */\n  static message(message = '') {\n    return `\n      <div class=\"message\">\n        ${message}\n      </div>\n    `;\n  }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/template.js\n// module id = 0\n// module chunks = 0","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./assets/index.scss\n// module id = 1\n// module chunks = 0","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/normalize.css/normalize.css\n// module id = 2\n// module chunks = 0","import DataService from './dataService';\nimport { debounce } from './helpers';\n\nexport default class Controller {\n  constructor(view) {\n    this.view = view;\n    this.store = [];\n    this.query = '';\n\n    // Bind actions to UI elements & keyboard events\n    const debouncedSearchImage = debounce(this.searchImage.bind(this), 200);\n    view.bindSearchImage(debouncedSearchImage);\n  }\n\n  /**\n   * Fetch list of photos from flickr\n   */\n  searchImage(query = '') {\n    if (query !== this.query) {\n      this.query = query;\n\n      if (query === '') {\n        this.store = [];\n        this.view.showThumbs(this.store);\n      } else {\n        this.fetchPhotos(query);\n      }\n    }\n  }\n\n  /**\n   * Fetch list of photos from flickr\n   */\n  fetchPhotos(query) {\n    this.view.showLoading();\n\n    DataService.fetchFlickrPhotos(query)\n      .then((images) => {\n        if (query === this.query) {\n          this.store = images;\n\n          if (images.length) {\n            this.view.showThumbs(this.store);\n          } else {\n            this.view.showNoResults();\n          }\n        }\n      });\n  }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/controller.js\n// module id = 3\n// module chunks = 0","/* global document */\nimport Template from './template';\n\nexport default class View {\n  constructor() {\n    this.$images = document.querySelector('.images');\n    this.$searchBar = document.getElementById('search-bar');\n  }\n\n  /**\n   * Render thumbnails\n   */\n  showThumbs(items) {\n    this.$images.innerHTML = Template.thumbnails(items);\n  }\n\n  /**\n   * Render loading message\n   */\n  showLoading() {\n    this.$images.innerHTML = Template.message('Loading');\n  }\n\n  /**\n   * Render no results message\n   */\n  showNoResults() {\n    const query = this.$searchBar.value;\n    this.$images.innerHTML = Template.message(`No results for ${query}`);\n  }\n\n  /**\n   * Bind search image action to keyup event\n   */\n  bindSearchImage(action) {\n    View.bindActionToKeyEvent(this.$searchBar, action);\n  }\n\n  /**\n   * @private Bind an action to a keyboard event\n   */\n  static bindActionToKeyEvent(element, action) {\n    const eventListener = () => {\n      action(element.value);\n    };\n    element.addEventListener('keyup', eventListener, true);\n  }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/view.js\n// module id = 4\n// module chunks = 0","/* eslint-disable no-unused-vars */\nimport 'normalize.css';\nimport Controller from './controller';\nimport View from './view';\nimport '../assets/index.scss';\n\nconst view = new View();\nconst controller = new Controller(view);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app.js\n// module id = 5\n// module chunks = 0","/* global fetch */\nexport default class DataService {\n  /**\n   * @private Build a flickr API request url\n   */\n  static getFlickrApiUrl(query) {\n    let url = 'https://api.flickr.com/services/rest/';\n    url += '?method=flickr.photos.search';\n    url += `&text=${query}`;\n    url += '&api_key=4e258a4396bf5ba0448b2e2fe574034e';\n    url += '&sort=interestingness-desc';\n    url += '&extras=url_sq,url_q,views';\n    url += '&format=json&nojsoncallback=1';\n    return url;\n  }\n\n  /**\n   * Returns a promise with photos from flickr\n   */\n  static fetchFlickrPhotos(query) {\n    const url = DataService.getFlickrApiUrl(query);\n    return fetch(url)\n      .then(json => json.json())\n      .then(data => data.photos.photo.map((photo) => {\n        const { title, url_sq, url_q, views } = photo;\n        return {\n          title,\n          thumb: {\n            small: url_sq,\n            large: url_q,\n          },\n          views,\n        };\n      }));\n  }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/dataService.js\n// module id = 6\n// module chunks = 0","/* eslint-disable import/prefer-default-export */\n\n/**\n * Debounce function to limit the rate what a function is called with\n */\nexport function debounce(fn, wait) {\n  let timeout = null;\n  return (...args) => {\n    const context = this;\n\n    if (timeout) {\n      clearTimeout(timeout);\n    }\n    timeout = setTimeout(() => {\n      fn.apply(context, args);\n    }, wait);\n  };\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/helpers.js\n// module id = 12\n// module chunks = 0"],"sourceRoot":""}